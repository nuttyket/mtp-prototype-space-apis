<!doctype html>

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Microsoft Cognitive Emotion Tracking Demo</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

	<link rel="stylesheet" href="css/app.css">

</head>

<body>

	<h3 id="title"> Subscribing to Emotion API Demo </h3>
	
	<div id="subscription_content">
<!--
		<button class="btn btn-success" id="getlatestemotion"> Check how peeps are feeling!</button>
		<br><br>
-->
		<div id="emotionresults"></div>
		<img src="#" id="emoji">
		<h2></h2>
	</div>

	<script>
        function showEmotion() {
            console.log('Calling showEmotion');
			$.ajax({
		        type:"POST",
		        beforeSend: function (request){
		            request.setRequestHeader("Content-Type", "application/json");
		        },
		        url: "/api/emotion",
		        success: function(msg) {
		            console.log(msg);
                    var result = JSON.parse(msg);
                    console.log("RESULT IS " + result[0]);
                    console.log("OVERALL EMOTION IS " + result[0].overall_emotion);

          			$("#emotionresults").html(result);

                    switch (result[0].overall_emotion) {
					    case 'anger':
					        $("#emoji").attr("src","img/anger.png");
					        $("#subscription_content h2").html("Feeling a lot of anger!");
					        break;
					    case 'contempt':
					        $("#emoji").attr("src","img/contempt.png");
					        $("#subscription_content h2").html("Feeling a lot of contempt!");
					        break;
					    case 'disgust':
					        $("#emoji").attr("src","img/disgust.png");
					        $("#subscription_content h2").html("Feeling a lot of disgust!");
					        break;
					    case 'fear':
					        $("#emoji").attr("src","img/fear.png");
					        $("#subscription_content h2").html("Feeling a lot of fear!");
					        break;
					    case 'happiness':
					        $("#emoji").attr("src","img/happy.png");
					        $("#subscription_content h2").html("Feeling a lot of happiness!");
					        break;
					    case 'neutral':
					        $("#emoji").attr("src","img/neutral.png");
					        $("#subscription_content h2").html("Feeling neutral!");
					        break;
					    case 'sadness':
					        $("#emoji").attr("src","img/sadness.png");
					        $("#subscription_content h2").html("Feeling a lot of sadness!");
					        break;
					    case 'surprise':
					        $("#emoji").attr("src","img/surprise.png");
					        $("#subscription_content h2").html("Feeling surprised!");
					        break;
					}
		        }
			});
        }
        window.addEventListener('load', showEmotion, false);
//		setInterval(function(){
//			$("#getlatestemotion").click();
//		}, 2000);
	</script>

</body>
</html>


<!--
		$("#getlatestemotion").onload(function() {
			$.ajax({
		        type:"POST",
		        beforeSend: function (request){
		            request.setRequestHeader("Content-Type", "application/json");
		        },
		        url: "/api/emotion",
		        success: function(msg) {
		            console.log(msg);
                    var result = JSON.parse(msg);
                    console.log("RESULT IS " + result[0]);
                    console.log("OVERALL EMOTION IS " + result[0].overall_emotion);

          			$("#emotionresults").html(result);

                    switch (result[0].overall_emotion) {
					    case 'anger':
					        $("#emoji").attr("src","img/anger.png");
					        $("#subscription_content h2").html("Feeling a lot of anger!");
					        break;
					    case 'contempt':
					        $("#emoji").attr("src","img/contempt.png");
					        $("#subscription_content h2").html("Feeling a lot of contempt!");
					        break;
					    case 'disgust':
					        $("#emoji").attr("src","img/disgust.png");
					        $("#subscription_content h2").html("Feeling a lot of disgust!");
					        break;
					    case 'fear':
					        $("#emoji").attr("src","img/fear.png");
					        $("#subscription_content h2").html("Feeling a lot of fear!");
					        break;
					    case 'happiness':
					        $("#emoji").attr("src","img/happy.png");
					        $("#subscription_content h2").html("Feeling a lot of happiness!");
					        break;
					    case 'neutral':
					        $("#emoji").attr("src","img/neutral.png");
					        $("#subscription_content h2").html("Feeling neutral!");
					        break;
					    case 'sadness':
					        $("#emoji").attr("src","img/sadness.png");
					        $("#subscription_content h2").html("Feeling a lot of sadness!");
					        break;
					    case 'surprise':
					        $("#emoji").attr("src","img/surprise.png");
					        $("#subscription_content h2").html("Feeling surprised!");
					        break;
					}
		        }
			});
		});-->
